(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["e692dabe"],{"0794":function(e,t,n){"use strict";var a=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("a357")),o=a(n("4d7d")),r=a(n("f26a")),s=a(n("5ca1c")),u={name:"Layout",components:{ResetDialog:r.default,PatientDataDialog:s.default},data:function(){return{actions:[{icon:"mdi-file-outline",action:"reset",tooltip:"Uusi yhteenveto"},{icon:"mdi-folder-open",action:"open",tooltip:"Lataa"},{icon:"mdi-content-save",action:"save",tooltip:"Tallenna"},{icon:"mdi-file-word",action:"toDoc",tooltip:"Luo Word-tiedosto"}],tabs:[{text:"Hoito",route:"/treatment"},{text:"Haittavaikutukset",route:"/adverse-effects"},{text:"Jälkiseuranta",route:"/followup"},{text:"Lomakkeen täyttäjä",route:"/filled-by"}],resetDialogShown:!1,patientDataDialogShown:!1,patientData:{name:"",id:""}}},methods:{call:function(e){this[e]()},reset:function(){this.resetDialogShown=!0},onResetDialogClose:function(e){this.resetDialogShown=!1,e&&(this.$store.dispatch("reset"),this.$router.push("treatment",(function(){})),this.$q.notify({icon:"mdi-check",color:"positive",message:"Lomaketiedot tyhjennetty"}))},open:function(){document.getElementById("loader").click()},loadFile:function(e){var t=this,n=new FileReader;n.onabort=function(){return t.$q.notify({icon:"mdi-alert-circle",color:"negative",message:"Virhe tiedoston lataamisessa"})},n.onload=function(e){var n=e.target.result,a=JSON.parse(n);t.$store.dispatch("loadFromFile",a),t.$router.push("treatment",(function(){})),t.$q.notify({icon:"mdi-check",color:"positive",message:"Tiedoston lataaminen onnistui"})},n.readAsText(e.target.files[0])},save:function(){var e=this.$store.getters.formData,t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json;charset=utf-8"}),a=(0,i.default)("yhteenveto.json",n,"application/json;charset=utf-8");a||this.$q.notify({icon:"mdi-alert-circle",color:"positive",message:"Tallennus epäonnistui"})},toDoc:function(){this.patientData={name:"",id:""},this.patientDataDialogShown=!0},onPatientDataDialogClose:function(e){this.patientDataDialogShown=!1,e&&(0,o.default)(this.$store.getters.formData,e)}}};t.default=u},"11b3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"hHh Lpr fFf"}},[n("q-header",{attrs:{elevated:""}},[n("q-toolbar",[n("q-icon",{attrs:{name:"mdi-file-document",size:"md"}}),n("q-toolbar-title",[e._v("\n        Yhteenveto syöpähoidoista\n      ")]),e._l(e.actions,(function(t){return n("q-btn",{key:t.action,attrs:{icon:t.icon,flat:"",round:""},on:{click:function(n){return e.call(t.action)}}},[n("q-tooltip",[e._v(e._s(t.tooltip))])],1)})),n("q-btn",{attrs:{to:"/",icon:"mdi-help",flat:"",round:""}},[n("q-tooltip",[e._v("Käyttöohjeet")])],1)],2),n("q-tabs",{attrs:{align:"left"}},e._l(e.tabs,(function(t){return n("q-route-tab",{key:t.route,attrs:{to:t.route,exact:""}},[e._v("\n        "+e._s(t.text)+"\n      ")])})),1)],1),n("q-footer",{attrs:{elevated:""}},[n("q-toolbar",[n("span",{staticStyle:{flex:"1 1 auto"}}),n("span",[e._v("KuopioHema Tools © 2019 S. Becker")])])],1),n("q-page-container",[n("router-view")],1),n("q-dialog",{model:{value:e.resetDialogShown,callback:function(t){e.resetDialogShown=t},expression:"resetDialogShown"}},[n("reset-dialog",{on:{close:function(t){return e.onResetDialogClose(t)}}})],1),n("q-dialog",{attrs:{"no-backdrop-dismiss":""},model:{value:e.patientDataDialogShown,callback:function(t){e.patientDataDialogShown=t},expression:"patientDataDialogShown"}},[n("patient-data-dialog",{attrs:{formData:e.patientData},on:{close:function(t){return e.onPatientDataDialogClose(t)}}})],1),n("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"loader"},on:{change:function(t){return e.loadFile(t)}}})],1)},i=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},"4cb9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"ResetDialog"};t.default=a},"4d7d":function(e,t,n){"use strict";var a=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=u,n("551c"),n("06db"),n("6762"),n("2fdb"),n("28a5");var i=a(n("967e")),o=a(n("4db1"));n("96cf");var r=n("49fb"),s=a(n("a357"));function u(e,t){var n,a,u,h,f,g,m,v,w,b,x,k,y,D,T,N,P,R,q,_;return i.default.async((function(H){while(1)switch(H.prev=H.next){case 0:if(n=new r.Document({creator:"KuopioHema",title:"Yhteenveto syöpähoidoista",styles:{paragraphStyles:[{id:"Normal",name:"Normal",next:"Normal",quickFormat:!0,run:{size:24,font:"Candara"},paragraph:{spacing:{after:300}}},{id:"NormalNoSpacing",name:"Normal (no spacing after paragraph)",basedOn:"Normal",next:"Normal",quickFormat:!0,paragraph:{spacing:{after:0},keepNext:!0}},{id:"Indent",name:"Indented",basedOn:"Normal",next:"Normal",quickFormat:!0,paragraph:{indent:{left:240}}},{id:"Title",name:"Document Title",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:36,bold:!0},paragraph:{spacing:{after:300},alignment:r.AlignmentType.CENTER,keepNext:!0}},{id:"Heading1",name:"Heading 1",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:28,bold:!0},paragraph:{spacing:{after:120},keepNext:!0}},{id:"Heading2",name:"Heading 2",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:24,bold:!0},paragraph:{spacing:{after:80},keepNext:!0}}]}}),a=new r.Header({children:[new r.Paragraph({children:[new r.TextRun("Yhteenveto syöpähoidoista"),new r.TextRun("\t".concat(t.name)),new r.TextRun("\t".concat(t.id)).break()],tabStops:[{type:r.TabStopType.RIGHT,position:r.TabStopPosition.MAX}]})]}),u=new r.Footer({children:[new r.Paragraph({children:[new r.TextRun({children:["Sivu ",r.PageNumber.CURRENT," / ",r.PageNumber.TOTAL_PAGES]})],alignment:r.AlignmentType.RIGHT})]}),h=[new r.Paragraph({text:"Yhteenveto syöpähoidoista",heading:r.HeadingLevel.TITLE})],h.push(new r.Paragraph({children:[].concat((0,o.default)(l("Nimi",t.name,!0)),(0,o.default)(l("Henkilötunnus",t.id)))})),f=e.treatment.diagnosis,g="".concat(f.icd10," ").concat(f.name).concat(f.date?" (todettu ".concat(f.date,")"):""),m=l("Diagnoosi",g,!0),f.subtype&&m.push.apply(m,(0,o.default)(l("Alatyyppi",f.subtype,!0))),f.spread&&m.push.apply(m,(0,o.default)(l("Levinneisyys",f.spread))),h.push(new r.Paragraph({children:m})),!f.printSpreadPicture){H.next=17;break}return H.next=14,i.default.awrap(p(f.spreadImgData));case 14:v=H.sent,w=r.Media.addImage(n,v,300,300,{floating:{horizontalPosition:{relative:r.HorizontalPositionRelativeFrom.RIGHT_MARGIN,offset:-2858400},verticalPosition:{relative:r.VerticalPositionRelativeFrom.TOP_MARGIN,offset:1494e3},wrap:{type:r.TextWrappingType.SQUARE,side:r.TextWrappingSide.LEFT}}}),h.push(new r.Paragraph(w));case 17:b=e.treatment.protocols,b.length&&(h.push(new r.Paragraph({text:b.length>1?"Protokollat":"Protokolla",heading:r.HeadingLevel.HEADING_1})),b.forEach((function(e,t){h.push(new r.Paragraph({children:[new r.TextRun({text:e.name,bold:!0}),new r.TextRun(e.riskGroup?" (".concat(e.riskGroup,")"):""),new r.TextRun(": "),new r.TextRun(e.startDate||"Aloituspäivä ei tiedossa"),new r.TextRun(" - "),new r.TextRun(e.endDate||"Lopetuspäivä ei tiedossa")],style:t<b.length-1?"NormalNoSpacing":"Normal"}))}))),x=e.treatment.chemo,x.done&&(h.push(new r.Paragraph({text:"Sytostaattihoito",heading:r.HeadingLevel.HEADING_1})),h.push(new r.Paragraph({children:[new r.TextRun("Aloitus: "),new r.TextRun(x.startDate||"Aloituspäivä ei tiedossa"),new r.TextRun("Lopetus: ").break(),new r.TextRun(x.endDate||"Lopetuspäivä ei tiedossa")],keepNext:!0})),k=e.treatment.chemoDrugs,k.length&&(h.push(new r.Paragraph({text:"Kumulatiiviset lääkeannokset:",heading:r.HeadingLevel.HEADING_2})),k.forEach((function(e,t){h.push(new r.Paragraph({children:[new r.TextRun("".concat(e.name," ")),new r.TextRun("".concat(e.dose," "))].concat((0,o.default)(d(e.doseType)),[new r.TextRun(e.notes?" (".concat(e.notes,")"):"")]),style:t<k.length-1?"NormalNoSpacing":"Normal"}))})))),y=e.treatment.radio,y.done&&(h.push(new r.Paragraph({text:"Sädehoito",heading:r.HeadingLevel.HEADING_1})),h.push(new r.Paragraph({children:[new r.TextRun("Aloitus: "),new r.TextRun(y.startDate||"Aloituspäivä ei tiedossa"),new r.TextRun("Lopetus: ").break(),new r.TextRun(y.endDate||"Lopetuspäivä ei tiedossa")],keepNext:!0})),D=e.treatment.radioTargets,D.length&&(h.push(new r.Paragraph({text:"Sädehoitokohteet:",heading:r.HeadingLevel.HEADING_2})),D.forEach((function(e,t){h.push(new r.Paragraph({children:[new r.TextRun("".concat(e.target,", ")),new r.TextRun("".concat(e.type,", ")),new r.TextRun("".concat(e.singleDose||"Kerta-annos ei tiedossa"," / ").concat(e.totalDose||"Kokonaisannos ei tiedossa"," Gy ")),new r.TextRun("(".concat(e.startDate||"Aloituspäivä ei tiedossa"," - ").concat(e.endDate||"Lopetuspäivä ei tiedossa",")"))],style:e.notes||t<b.length-1?"NormalNoSpacing":"Normal"})),e.notes&&h.push(new r.Paragraph({children:[new r.TextRun(e.notes)],style:"Indent",keepNext:t<D.length-1}))})))),T=e.treatment.surgeryProcedures,T.length&&(h.push(new r.Paragraph({text:"Leikkaukset ja toimenpiteet",heading:r.HeadingLevel.HEADING_1})),T.forEach((function(e,t){h.push(new r.Paragraph({children:[new r.TextRun("".concat(e.procedure," (").concat(e.date,")"))],style:e.description||t<T.length-1?"NormalNoSpacing":"Normal"})),e.description&&h.push(new r.Paragraph({children:[new r.TextRun(e.description)],style:"Indent",keepNext:t<T.length-1}))}))),N=e.treatment.foreignBodies,N.length&&(h.push(new r.Paragraph({text:"Vierasesineet",heading:r.HeadingLevel.HEADING_1})),N.forEach((function(e,t){h.push(new r.Paragraph({children:[new r.TextRun("".concat(e.type," (").concat(e.removed?"poistettu":"ei poistettu",")"))],style:t<N.length-1?"NormalNoSpacing":"Normal"}))}))),P=e.treatment.stemCellTransplants,P.length&&(h.push(new r.Paragraph({text:1===P.length?"Kantasolusiirto":"Kantasolusiirrot",heading:r.HeadingLevel.HEADING_1})),P.forEach((function(e,t){var n=[].concat((0,o.default)(l("Päivämäärä",e.date,!0)),(0,o.default)(l("Solujen lähde",e.source.label,!0)));e.source.allo&&(n.push.apply(n,(0,o.default)(l("Luovuttajan sukupuoli",e.donorSex,!0))),n.push.apply(n,(0,o.default)(l("HLA-sopivuus",e.hlaMatch,!0)))),n.push.apply(n,(0,o.default)(l("Esihoito",e.pretreatment,!1))),h.push(new r.Paragraph({children:n,keepLines:!0,keepNext:t<P.length-1}))}))),R=e.adverseEffects,h.push(new r.Paragraph({text:"Haittavaikutukset",heading:r.HeadingLevel.HEADING_1})),R.length?R.forEach((function(e,t){h.push(new r.Paragraph({children:[new r.TextRun({text:"".concat(e.organSystem,":"),bold:!0})].concat((0,o.default)(c(e.description,!0)))}))})):h.push(new r.Paragraph("Ei todettu merkittäviä syöpähoitojen haittavaikutuksia.")),q=e.followup,h.push(new r.Paragraph({text:"Jälkiseuranta",heading:r.HeadingLevel.HEADING_1})),h.push(new r.Paragraph({text:"Yleiset ohjeet:",heading:r.HeadingLevel.HEADING_2})),h.push(new r.Paragraph({children:c(q.general),keepNext:!0,keepLines:!0})),h.push(new r.Paragraph({text:"Rokotusohjeet:",heading:r.HeadingLevel.HEADING_2})),h.push(new r.Paragraph({children:c(q.vaccination),keepNext:!0,keepLines:!0})),_=e.filledBy,h.push(new r.Paragraph({children:[new r.TextRun(_.name),new r.TextRun("puh. ".concat(_.phone)).break(),new r.TextRun(_.place).break(),new r.TextRun(_.date).break()],keepLines:!0,spacing:{before:500},border:{top:{color:"black",space:50,value:"single",size:2}}})),n.addSection({headers:{default:a},footers:{default:u},children:h}),r.Packer.toBlob(n).then((function(e){(0,s.default)("yhteenveto.docx",e,"application/vnd.openxmlformats-officedocument.wordprocessingml.document")}));case 42:case"end":return H.stop()}}))}function l(e,t,n){var a=[new r.TextRun({text:"".concat(e,": "),bold:!0}),new r.TextRun(t)];return n&&a.push(new r.TextRun("").break()),a}function c(e,t){var n=e.split("\n"),a=[];return n.forEach((function(e,n){t||0!==n?a.push(new r.TextRun(e).break()):a.push(new r.TextRun(e))})),a}function d(e){if(!e.includes("m2"))return[new r.TextRun(e)];var t=e.split("m2"),n=t.map((function(e){return new r.TextRun(e)}));return n.splice(1,0,new r.TextRun("m")),n.splice(2,0,new r.TextRun({text:"2",superScript:!0})),n}function p(e){return new Promise((function(t){var n,a,o,r;return i.default.async((function(s){while(1)switch(s.prev=s.next){case 0:return n=document.createElement("canvas"),n.width=600,n.height=600,a=n.getContext("2d"),s.next=6,i.default.awrap(h("statics/human_outline.png"));case 6:return o=s.sent,s.next=9,i.default.awrap(h(e));case 9:r=s.sent,a.drawImage(o,0,0),a.drawImage(r,0,0),t(n.toDataURL("image/png",1));case 13:case"end":return s.stop()}}))}))}function h(e){return new Promise((function(t){var n=new Image;n.onload=function(){return t(n)},n.src=e}))}},"5ca1c":function(e,t,n){"use strict";n.r(t);var a=n("aeb7"),i=n("b32f");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var r=n("2877"),s=n("f09f"),u=n.n(s),l=n("a370"),c=n.n(l),d=n("27f9"),p=n.n(d),h=n("4b7e"),f=n.n(h),g=n("9c40"),m=n.n(g),v=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=v.exports,v.options.components=Object.assign({QCard:u(),QCardSection:c(),QInput:p(),QCardActions:f(),QBtn:m()},v.options.components)},7619:function(e,t,n){"use strict";n.r(t);var a=n("0794"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"854b":function(e,t,n){"use strict";n.r(t);var a=n("4cb9"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},a9c3:function(e,t,n){"use strict";n.r(t);var a=n("11b3"),i=n("7619");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var r=n("2877"),s=n("4d5a"),u=n.n(s),l=n("e359"),c=n.n(l),d=n("65c6"),p=n.n(d),h=n("0016"),f=n.n(h),g=n("6ac5"),m=n.n(g),v=n("9c40"),w=n.n(v),b=n("05c0"),x=n.n(b),k=n("429b"),y=n.n(k),D=n("7867"),T=n.n(D),N=n("7ff0"),P=n.n(N),R=n("09e3"),q=n.n(R),_=n("24e8"),H=n.n(_),S=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=S.exports,S.options.components=Object.assign({QLayout:u(),QHeader:c(),QToolbar:p(),QIcon:f(),QToolbarTitle:m(),QBtn:w(),QTooltip:x(),QTabs:y(),QRouteTab:T(),QFooter:P(),QPageContainer:q(),QDialog:H()},S.options.components)},aeb7:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-card",{staticStyle:{width:"400px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Syötä henkilötiedot")])]),n("q-card-section",[n("q-input",{ref:"name",attrs:{label:"Nimi *",rules:[e.required],filled:"",clearable:"",autofocus:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),n("q-input",{ref:"id",attrs:{label:"Henkilötunnus *",rules:[e.required,e.isValidID],"lazy-rules":"",filled:"",clearable:""},model:{value:e.formData.id,callback:function(t){e.$set(e.formData,"id",t)},expression:"formData.id"}})],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{flat:"",color:"negative"},on:{click:function(t){return e.$emit("close",void 0)}}},[e._v("Peruuta")]),n("q-btn",{attrs:{color:"secondary"},on:{click:function(t){return e.onAccept()}}},[e._v("Hyväksy")])],1)],1)},i=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},b1cb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("e2da"),i={name:"PatientDataDialog",props:{formData:{type:Object,required:!0}},methods:{required:a.required,isValidID:a.isValidID,onAccept:function(){this.$refs.name.validate(),this.$refs.id.validate(),this.$refs.name.value&&this.$refs.id.value?this.$refs.id.hasError?this.$q.notify({icon:"mdi-alert-circle",color:"negative",message:"Virheellinen henkilötunnus",timeout:2e3}):this.$emit("close",this.formData):this.$q.notify({icon:"mdi-alert-circle",color:"negative",message:"Täytä kaikki pakolliset kentät",timeout:2e3})}}};t.default=i},b32f:function(e,t,n){"use strict";n.r(t);var a=n("b1cb"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},e2da:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidID=t.isValidDate=t.isNumber=t.required=void 0,n("6762"),n("c5f6"),n("4917");var a=function(e){return!!e||"Pakollinen kenttä"};t.required=a;var i=function(e){return!e||e.match(/^\d+([,.]\d+)?$/)||"Virheellinen luku"};t.isNumber=i;var o=function(e,t,n){var a=Number(e),i=Number(t),o=Number(n);o<100&&(o+=2e3);var r=[4,6,9,11],s=o%4===0&&(o%100!==0||o%400===0);return!(isNaN(a)||isNaN(i)||isNaN(o))&&(!(a<1||i<1||o<1900||o>2099)&&(!(i>12)&&(!(a>31)&&(!(r.includes(i)&&a>30)&&(2!==i||!(a>29||!s&&a>28))))))};t.isValidDate=o;var r=function(e){var t="Virheellinen henkilötunnus";if(!e)return t;var n=e.slice(6,7);if(!n.match(/^[-A]$/))return t;var a="-"===n?"19":"20",i=e.slice(0,2),r=e.slice(2,4),s=a+e.slice(4,6);if(!o(i,r,s))return t;var u=e.slice(7,10);if(!u.match(/^\d{3}$/))return t;var l=Number(e.slice(0,6)+u)%31,c=e.slice(10,11),d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"];return c===d[l]||t};t.isValidID=r},f26a:function(e,t,n){"use strict";n.r(t);var a=n("f9eb"),i=n("854b");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var r=n("2877"),s=n("f09f"),u=n.n(s),l=n("a370"),c=n.n(l),d=n("4b7e"),p=n.n(d),h=n("9c40"),f=n.n(h),g=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=g.exports,g.options.components=Object.assign({QCard:u(),QCardSection:c(),QCardActions:p(),QBtn:f()},g.options.components)},f9eb:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-card",{staticStyle:{width:"400px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Uusi yhteenveto")])]),n("q-card-section",[e._v("\n    Kaikki lomakkeisiin syötetyt tiedot poistetaan. Tätä ei voi kumota!\n  ")]),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{flat:"",color:"secondary"},on:{click:function(t){return e.$emit("close",!1)}}},[e._v("Peruuta")]),n("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.$emit("close",!0)}}},[e._v("Uusi yhteenveto")])],1)],1)},i=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))}}]);